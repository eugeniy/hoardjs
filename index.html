<!doctype html>
<html>
<head>
<title>Hoard</title>
<link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
<script src="vendor/yepnope-min.js"></script>
</head>
<body>

<div id="hoard"></div>

<script type="text/template" id="application-template">
    <div class="container">
        <div class="content">
            <div class="row">
                <div id="reservations" class="span12"></div>
            </div>
            <div class="row">
                <div id="resources" class="span12"></div>
            </div>
        </div>
    </div>
    <div id="reservation-form"></div>
    <div id="resource-form"></div>
</script>

<script type="text/template" id="error-template">
    <div class="alert alert-error"><%= error %></div>
</script>

<script type="text/template" id="resources-template">
<table class="table table-striped table-bordered table-condensed">
    <thead>
    <tr>
        <th class="status"></td>
        <th class="name" colspan="2">Resource</td>
        <th class="address">Address</td>
    </tr>
    </thead>
    <tbody></tbody>
</table>
</script>

<script type="text/template" id="resource-template">
    <td class="status"><span class="label label-success">OK</span></td>
    <td class="name"><%= name %></td>
    <td class="description"><%= typeof(description) !== 'undefined' ? description : '' %></td>
    <td class="address"></td>
</script>

<script type="text/template" id="reservations-template">
<table class="table table-striped table-bordered table-condensed">
    <tbody></tbody>
</table>
</script>

<script type="text/template" id="reservation-template">
    <td class="name"><%= resource.name %></td>
    <td class="date"><%= Hoard.util.format_datetime(start_at) %> to <%= Hoard.util.format_datetime(end_at) %></td>
    <td class="actions">
        <div class="btn-group">
            <button class="btn btn-small modify">Modify</button>
            <button class="btn btn-danger btn-small delete">
                <i class="icon-trash icon-white"></i>
                Delete</button>
        </div>
    </td>
</script>

<script type="text/template" id="reservation-form-template">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">&times;</a>
        <h3><%= resource.name %></h3>
    </div>
    <div class="modal-body">
        <div class="errors"></div>
        <label>Date range</label>
        <input name="start_at_date" value="<%= Hoard.util.format_date(reservation.get('start_at')) %>" class="span2">
        <input name="start_at_time" value="<%= Hoard.util.format_time(reservation.get('start_at')) %>" class="span1">
            to
        <input name="end_at_time" value="<%= Hoard.util.format_time(reservation.get('end_at')) %>" class="span1">
        <input name="end_at_date" value="<%= Hoard.util.format_date(reservation.get('end_at')) %>" class="span2">
    </div>
    <div class="modal-footer">
        <input type="hidden" name="resource" value="<%= resource.id %>">
        <input type="submit" value="Reserve" class="btn btn-primary">
        <button class="btn" data-dismiss="modal">Discard</button>
    </div>
</script>

<script>
yepnope([{
    load: ['vendor/jquery-1.7.1.min.js', 'vendor/underscore-min.js',
           'vendor/backbone-min.js', 'vendor/bootstrap/js/bootstrap.min.js',
           'lib/hoard.js', 'lib/util.js', 'lib/model/error.js',
           'lib/model/resource.js', 'lib/model/reservation.js',
           'lib/view/resource/show.js', 'lib/view/resource/list.js',
           'lib/view/reservation/show.js', 'lib/view/reservation/list.js',
           'lib/view/reservation/form.js', 'lib/view/application.js'],
    complete: function() {
        var hoard = new Hoard.view.Application;
        $('#hoard').append(hoard.render().el);
        Hoard.resources.fetch();
        Hoard.reservations.fetch();
    }
}]);
</script>

</body>
</html>
